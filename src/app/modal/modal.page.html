<ion-app>
  <ion-toolbar>
  </ion-toolbar>
  <ion-content>
    <mat-tab-group mat-stretch-tabs mat-align-tabs="center" selectedIndex={{indexTab}} (focusChange)="number = 5">
      <mat-tab label="Noticias">
        <ng-template matTabContent>
          <ngx-twitter-timeline
            [data]="{ sourceType: 'url', url: 'https://twitter.com/minsaude?ref_src=twsrc%5Etfw' }"
            [opts]="{ tweetLimit: 10 ,chrome: ['noheader', 'noscrollbar', 'nofooter'] }">
          </ngx-twitter-timeline>
        </ng-template>
      </mat-tab>
      <mat-tab label="Boletins Oficiais">
        <ng-template matTabContent>
          <h3>Escolha um estado</h3>

          <mat-form-field appearance="fill">
            <mat-select (selectionChange)="select()" [(value)]="selected">
              <mat-option *ngFor="let state of states" [value]="state.code">
                {{ state.state }}
              </mat-option>
            </mat-select>
          </mat-form-field>
          <ion-spinner *ngIf="loading"></ion-spinner>
          <div role="listitem" *ngFor="let boletim of data | slice:0:number">
            <ion-card class="card">
              <ion-card-header>
                <ion-card-title>{{ boletim.state }}</ion-card-title>
                <ion-card-subtitle>{{ boletim.date }}</ion-card-subtitle>
              </ion-card-header>
              <ion-card-content (click)="openBrowser( boletim.url )">
                <ion-item>
                  {{ boletim.notes || 'Sem notas para Exibir' }}
                </ion-item>
              </ion-card-content>
              <ion-item>
                <ion-button (click)="share(boletim.state, boletim.url)" color="primary" fill="clear" slot="start">
                  Compartilhar
                </ion-button>
                <h3 *ngIf=boletim.isPDF slot="end" style="color: red; right: 0; margin: 0;">
                  PDF
                </h3>
              </ion-item>
            </ion-card>  
            <mat-divider></mat-divider>
          </div>
          <ion-infinite-scroll (ionInfinite)="doInfinite($event)">
            <ion-infinite-scroll-content loadingSpinner="default" loadingText="Carregando mais items...">
            </ion-infinite-scroll-content>
          </ion-infinite-scroll>
        </ng-template>
      </mat-tab>
    </mat-tab-group>
    <div class="firstButton">   
      <ion-fab-button color="primary" id="closeButton" (click)="dismiss()">
        <ion-icon name="close-outline"></ion-icon>
      </ion-fab-button>
    </div>
  </ion-content>
</ion-app>